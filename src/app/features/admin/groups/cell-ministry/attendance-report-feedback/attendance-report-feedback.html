<div class="flex flex-col w-full">

    <!-- View mode -->
    <ng-container *ngIf="attendanceRecord$ | async as record">

        <!-- Header -->
        <div class="relative w-full h-40 sm:h-48 px-8 sm:px-12 bg-accent-100 dark:bg-accent-700">
            <!-- Background -->
            <ng-container>
                <img
                    class="absolute inset-0 object-cover w-full h-full"
                    src="/assets/images/backgrounds/cape-town-mountain.jpg">
            </ng-container>
            <!-- Close button -->
            <div class="flex items-center justify-end w-full max-w-3xl mx-auto pt-6">
                <button
                    mat-icon-button
                    [matTooltip]="'Close'"
                    [routerLink]="['../']">
                    <mat-icon
                        class="text-white"
                        [svgIcon]="'heroicons_outline:x'"></mat-icon>
                </button>
            </div>
        </div>

        <!-- Main -->
        <div class="relative flex flex-col flex-auto items-center p-6 pt-0 sm:p-12 sm:pt-0">
            <div class="w-full max-w-3xl">
                <!-- Name -->
                <div class="mt-3 text-4xl font-bold truncate">{{record.groupName}}</div>

                <div *ngIf="record.didNotOccur == false">
                    <!-- Attendance Date & Reviewed -->
                    <div class="flex flex-wrap items-center mt-2">
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-amber-200 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">{{record.attendanceDate | date}}</span>
                        </div>
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-blue-200 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">{{record.attendanceReviewed ? 'Reviewed' : 'Not Reviewed'}}</span>
                        </div>
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-indigo-200 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">Attendance Rate: {{record.attendanceRate.toFixed(3) * 100}}%</span>
                        </div>
                    </div>
                    <!-- More Stats -->
                    <div class="flex flex-wrap items-center mt-2">
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">Attendance: {{record.attendanceCount}}</span>
                        </div>
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">New Converts: {{record.newConvertCount}}</span>
                        </div>
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">First Timers: {{record.firstTimerCount}}</span>
                        </div>
                        <div class="flex items-center justify-center py-1 px-3 mr-3 mb-3 rounded-full leading-normal text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700">
                            <span class="text-sm font-medium whitespace-nowrap">Holy Spirit: {{record.receivedHolySpiritCount}}</span>
                        </div>

                    </div>
                </div>

                <ul>
                    <li *ngFor="let attendee of record.attendees">
                        <div>{{attendee.groupMember.firstName}} {{attendee.groupMember.lastName}} | {{attendee.didAttend ? 'Yes' : 'No'}}</div>
                    </li>
                </ul>

            </div>
        </div>

        </ng-container>
</div>