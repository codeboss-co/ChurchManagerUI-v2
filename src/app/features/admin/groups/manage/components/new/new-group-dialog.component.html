<div class="flex flex-col max-w-240 md:min-w-160 -m-6">

    <!-- Header -->
    <div class="flex flex-0 items-center justify-between h-16 pr-3 sm:pr-5 pl-6 sm:pl-8 bg-primary text-on-primary">
        <div class="text-lg">New Group</div>
        <button
            mat-icon-button
            (click)="matDialogRef.close()"
            [tabIndex]="-1">
            <mat-icon
                class="text-current"
                [svgIcon]="'heroicons_outline:x'"></mat-icon>
        </button>
    </div>

    <!-- form -->
    <form
        class="flex flex-col flex-auto p-6 sm:p-8 overflow-y-auto"
        [formGroup]="form">

        <!-- Name & Type -->
        <div *ngIf="groupType$ | async as groupType" class="mb-4 -mt-4">
            <div class="flex flex items-center">
                <mat-icon *ngIf="groupType.iconCssClass" class="mr-1" [svgIcon]="groupType.iconCssClass"></mat-icon>
                <div *ngIf="groupType.isSystem"
                    class="mr-1 px-1.5 rounded text-sm font-semibold leading-5 text-white bg-red-600">
                    SYSTEM GROUP
                </div>
                <div *ngIf="groupType.takesAttendance"
                     class="mr-1 px-1.5 rounded text-sm font-semibold leading-5 text-white bg-green-600">
                    TAKES ATTENDANCE
                </div>
            </div>
        </div>

        <group-types-select-control formControlName="groupTypeId" required> </group-types-select-control>

        <mat-form-field>
            <mat-label>Parent Group</mat-label>
            <mat-select formControlName="parentGroupId" >
                <mat-option [value]="parentGroup?.id">{{parentGroup?.name}}</mat-option>
                <mat-option value="">No Parent</mat-option>
            </mat-select>
            <mat-icon
                class="icon-size-5"
                matPrefix
                [svgIcon]="'heroicons_solid:link'"></mat-icon>
        </mat-form-field>


        <mat-form-field>
            <mat-label>Name</mat-label>
            <input
                matInput
                formControlName="name">
        </mat-form-field>

        <mat-form-field>
            <mat-label>Description</mat-label>
            <input
                matInput
                formControlName="description">
        </mat-form-field>


        <!-- Actions -->
        <div class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent">
            <!-- Cancel -->
            <button
                class="ml-auto"
                mat-button
                [matTooltip]="'Cancel'"
                (click)="matDialogRef.close()">
                Cancel
            </button>
            <!-- Save -->
            <button
                class="ml-2"
                mat-flat-button
                [color]="'primary'"
                [disabled]="form.pristine"
                [matTooltip]="'Save'"
                (click)="matDialogRef.close(form)">
                Save
            </button>
        </div>

    </form>

    {{form.value | json}}

</div>